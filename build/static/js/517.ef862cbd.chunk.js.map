{"version":3,"file":"static/js/517.ef862cbd.chunk.js","mappings":"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","sources":["Views/Postlogin/Home/Pending/CustomerDetails/Captureorder/CaptureVerify/Payment/index.js"],"sourcesContent":["import {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Flashbar,\r\n  Header,\r\n  Icon,\r\n  Modal,\r\n  SpaceBetween,\r\n} from \"@cloudscape-design/components\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport blurQR from \"../../../../../../../../Assets/Images/blurQR.png\";\r\nimport QR from \"../../../../../../../../Assets/Images/qr.png\";\r\nimport upiapps from \"../../../../../../../../Assets/Images/upiapps.png\";\r\nimport orderComplete from \"../../../../../../../../Assets/Images/orderComplete.png\";\r\nimport { fetchRunsheetDetail } from \"Redux-Store/Home/homeThunk\";\r\n\r\nconst Payment = () => {\r\n  const { runsheetId, orderId } = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const runsheetDetail = useSelector((state) => state.runsheet.runsheetDetail);\r\n  const order = runsheetDetail?.orders?.find((o) => o.id === orderId);\r\n  const [isQRGenereted, setIsQRGenereted] = useState(false);\r\n  const [comleteOrderModalVisible, setComleteOrderModalVisible] =\r\n    React.useState(false);\r\n  const [amountCollectedModal, setAmountCollectedModal] = React.useState(false);\r\n  const [items, setItems] = React.useState([\r\n    {\r\n      type: \"info\",\r\n      content: \"Collect Cash \",\r\n      onDismiss: () => setItems([]),\r\n      id: \"message_1\",\r\n    },\r\n  ]);\r\n\r\n  const [timeLeft, setTimeLeft] = useState(120);\r\n  const [isRunning, setIsRunning] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let timer;\r\n    if (isRunning && timeLeft > 0) {\r\n      timer = setInterval(() => {\r\n        setTimeLeft((prevTime) => prevTime - 1);\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(timer);\r\n  }, [isRunning, timeLeft]);\r\n\r\n  const handleQr = () => {\r\n    setIsRunning(true);\r\n    setIsQRGenereted(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!runsheetDetail || runsheetDetail.id !== runsheetId) {\r\n      const riderId = localStorage.getItem(\"id\")?.replace(/['\"]+/g, \"\");\r\n      if (riderId) {\r\n        dispatch(fetchRunsheetDetail({ riderId, runsheetId }));\r\n      }\r\n    }\r\n  }, [dispatch, runsheetDetail, runsheetId]);\r\n\r\n  if (!order) {\r\n    return <Box variant=\"h3\">Order not found</Box>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header>\r\n        <SpaceBetween direction=\"horizontal\" size=\"xs\" alignItems=\"center\">\r\n          <Button\r\n            onClick={() => navigate(-1)}\r\n            iconName=\"arrow-left\"\r\n            variant=\"icon\"\r\n          />\r\n          <span className=\"header_underline\">Payment</span>\r\n        </SpaceBetween>\r\n      </Header>\r\n      <div style={{ marginTop: 18 }}>\r\n        <Container>\r\n          <SpaceBetween direction=\"vertical\" size=\"xxs\">\r\n            <Box textAlign=\"center\" variant=\"h4\">\r\n              Amount to be Collect\r\n            </Box>\r\n            <Box textAlign=\"center\" variant=\"h4\">\r\n              <span style={{ color: \"#037F0C\" }}>₹ {order.totalPrice}/-</span>\r\n            </Box>\r\n            <div>\r\n              <Flashbar items={items} />\r\n            </div>\r\n          </SpaceBetween>\r\n        </Container>\r\n      </div>\r\n      <div style={{ marginTop: 18 }} className=\"flex aic jcsb\">\r\n        <div className=\"payment_lines\"></div>\r\n        <Box fontSize=\"16px\" variant=\"h4\">\r\n          Qr Code\r\n        </Box>\r\n        <div className=\"payment_lines\"></div>\r\n      </div>\r\n      <Box margin={\"xs\"} textAlign=\"center\">\r\n        Generate Your QR Code Below\r\n      </Box>\r\n      {isQRGenereted && (\r\n        <div className=\"flex jcc\">\r\n          <Box color=\"text-status-error\" textAlign=\"center\" variant=\"strong\">\r\n            {timeLeft} Seconds left to scan the QR code\r\n          </Box>\r\n        </div>\r\n      )}\r\n      <div className={!isQRGenereted ? \"qr_container\" : \"qr_container_white\"}>\r\n        <img src={!isQRGenereted ? blurQR : QR} alt=\"\" />\r\n        <span className=\"qr_btn\">\r\n          {!isQRGenereted && (\r\n            <Button onClick={handleQr} variant=\"normal\">\r\n              Generated QR Code\r\n            </Button>\r\n          )}\r\n        </span>\r\n      </div>\r\n      {isQRGenereted && (\r\n        <Box textAlign=\"center\">Scan QR Code in any UPI app</Box>\r\n      )}\r\n\r\n      {isQRGenereted && (\r\n        <div className=\"upi_img\">\r\n          <img src={upiapps} alt=\"\" />\r\n        </div>\r\n      )}\r\n      <div className=\"flex aic jcsb\">\r\n        <div className=\"payment_lines\"></div>\r\n        <Box margin={\"m\"} fontSize=\"16px\" variant=\"h4\">\r\n          OR\r\n        </Box>\r\n        <div className=\"payment_lines\"></div>\r\n      </div>\r\n      <div style={{display: 'flex', margin: '0 auto', width: '80%'}}>\r\n      <Button\r\n        onClick={() => setComleteOrderModalVisible(true)}\r\n        variant=\"primary\"\r\n        fullWidth\r\n      >\r\n        Collect Cash\r\n      </Button></div>\r\n      <Modal\r\n        onDismiss={() => setComleteOrderModalVisible(false)}\r\n        visible={comleteOrderModalVisible}\r\n      >\r\n        <SpaceBetween direction=\"vertical\" size=\"l\">\r\n          <div className=\"flex jcc\">\r\n            <img\r\n              src={orderComplete}\r\n              style={{ width: \"178px\", height: \"auto\" }}\r\n              alt=\"\"\r\n            />\r\n          </div>\r\n\r\n          <Box variant=\"h3\" textAlign=\"center\" color=\"text-status-success\">\r\n            Collecting ₹2980/- Cash\r\n          </Box>\r\n          <SpaceBetween size=\"xs\" direction=\"vertical\">\r\n            <Button\r\n              onClick={() => {\r\n                setAmountCollectedModal(true);\r\n                setComleteOrderModalVisible(false);\r\n              }}\r\n              variant=\"primary\"\r\n              fullWidth\r\n            >\r\n              Complete Order\r\n            </Button>\r\n            <Button\r\n              fullWidth\r\n              onClick={() => setComleteOrderModalVisible(false)}\r\n            >\r\n              Go Back\r\n            </Button>\r\n          </SpaceBetween>\r\n        </SpaceBetween>\r\n      </Modal>\r\n      <Modal\r\n        onDismiss={() => setAmountCollectedModal(false)}\r\n        visible={amountCollectedModal}\r\n      >\r\n        <SpaceBetween direction=\"vertical\" size=\"m\">\r\n          <div className=\"flex jcc\">\r\n            <Icon name=\"status-positive\" variant=\"success\" size=\"large\" c />\r\n          </div>\r\n          <Box textAlign=\"center\" color=\"text-status-success\" variant=\"p\">\r\n            \"The amount has been collected.\"\r\n          </Box>\r\n          <Button\r\n            onClick={() => {\r\n              setAmountCollectedModal(false);\r\n              navigate(\"/app/home\");\r\n            }}\r\n            variant=\"primary\"\r\n            fullWidth\r\n          >\r\n            Done\r\n          </Button>\r\n        </SpaceBetween>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n"],"names":["Payment","_runsheetDetail$order","runsheetId","orderId","useParams","dispatch","useDispatch","navigate","useNavigate","runsheetDetail","useSelector","state","runsheet","order","orders","find","o","id","isQRGenereted","setIsQRGenereted","useState","comleteOrderModalVisible","setComleteOrderModalVisible","React","amountCollectedModal","setAmountCollectedModal","items","setItems","type","content","onDismiss","timeLeft","setTimeLeft","isRunning","setIsRunning","useEffect","timer","setInterval","prevTime","clearInterval","_localStorage$getItem","riderId","localStorage","getItem","replace","fetchRunsheetDetail","_jsxs","_Fragment","children","_jsx","Header","SpaceBetween","direction","size","alignItems","Button","onClick","iconName","variant","className","style","marginTop","Container","Box","textAlign","color","totalPrice","Flashbar","fontSize","margin","src","blurQR","alt","handleQr","display","width","fullWidth","Modal","visible","orderComplete","height","Icon","name","c"],"sourceRoot":""}