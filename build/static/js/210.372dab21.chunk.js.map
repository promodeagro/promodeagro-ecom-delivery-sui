{"version":3,"file":"static/js/210.372dab21.chunk.js","mappings":"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","sources":["Utils/helperFunctions.js","Views/PreLogin/OtpVerification.js","../node_modules/@mui/material/FormControl/FormControlContext.js","../node_modules/@mui/material/FormControl/formControlState.js","../node_modules/@mui/material/FormControl/useFormControl.js","../node_modules/@mui/material/FormHelperText/formHelperTextClasses.js","../node_modules/@mui/material/FormHelperText/FormHelperText.js"],"sourcesContent":["import { Box, CircularProgress } from \"@mui/material\";\r\nimport { toast } from \"react-toastify\";\r\nexport const ValidationEngine = {\r\n  EMAIL_REGEX: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\r\n  PASSWORD_REGEX: /^(?=.*\\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/,\r\n  MOBILE_NUMBER_REGEX: /^\\d{10}$/,\r\n  NUMBER_ONLY_REGEX: /^[0-9]+$/,\r\n  DECIMAL_ALLOW_REGEX: /^\\d*\\.?\\d*$/,\r\n  ONLY_TWO_DECIMAL_ALLOW_REGEX: /^(?:\\d*\\.\\d{1,2}|\\d+)$/,\r\n  type: {\r\n    MANDATORY: 0,\r\n    REGEX: 1,\r\n    CHARACTERCOUNT: 2,\r\n  },\r\n  validate: (validationJSON, data) => {\r\n    function validateMandatory(validationObject, value) {\r\n      if (!value || value === '') {\r\n        return {\r\n          isValid: false,\r\n          error: {\r\n            isValid: false,\r\n            message: validationObject.message,\r\n          },\r\n        };\r\n      }\r\n      return {\r\n        isValid: true,\r\n        error: {\r\n          isValid: true,\r\n          message: \"\",\r\n        },\r\n      };\r\n    }\r\n\r\n    function validateCharacterCount(validationObject, value) {\r\n      if (value && value.length !== validationObject.CharacterCout) {\r\n        return {\r\n          isValid: false,\r\n          error: {\r\n            isValid: false,\r\n            message: validationObject.message,\r\n          },\r\n        };\r\n      }\r\n      return {\r\n        isValid: true,\r\n        error: {\r\n          isValid: true,\r\n          message: \"\",\r\n        },\r\n      };\r\n    }\r\n\r\n    function validateRegex(validationObject, value) {\r\n      if (validationObject.regex && !validationObject.regex.test(value)) {\r\n        return {\r\n          isValid: false,\r\n          error: {\r\n            isValid: false,\r\n            message: validationObject.message,\r\n          },\r\n        };\r\n      }\r\n      return {\r\n        isValid: true,\r\n        error: {\r\n          isValid: true,\r\n          message: \"\",\r\n        },\r\n      };\r\n    }\r\n\r\n    const keys = Object.keys(data);\r\n    const errors = {};\r\n    let isValid = true;\r\n    let errorObj;\r\n    keys.forEach((key) => {\r\n      const validationArray = validationJSON[key];\r\n      const value = data[key];\r\n      for (const validationObj of validationArray) {\r\n        if (validationObj.type === ValidationEngine.type.MANDATORY) {\r\n          errorObj = validateMandatory(validationObj, value);\r\n        } else if (\r\n          validationObj.type === ValidationEngine.type.CHARACTERCOUNT\r\n        ) {\r\n          errorObj = validateCharacterCount(validationObj, value);\r\n        } else if (validationObj.type === ValidationEngine.type.REGEX) {\r\n          errorObj = validateRegex(validationObj, value);\r\n        }\r\n        errors[key] = errorObj.error;\r\n        isValid = isValid && errorObj.isValid;\r\n        if (!errorObj.isValid) {\r\n          break;\r\n        }\r\n      }\r\n    });\r\n    errors.isValid = isValid;\r\n    return errors;\r\n  },\r\n};\r\n\r\nexport const ErrorMessages = {\r\n  error: (message) =>\r\n    toast.error(message, {\r\n      position: \"top-right\",\r\n      autoClose: 3000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      theme: \"colored\",\r\n    }),\r\n  success: (message) =>\r\n    toast.success(message, {\r\n      position: \"top-right\",\r\n      autoClose: 3000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      theme: \"colored\",\r\n    }),\r\n  info: (message) =>\r\n    toast.info(message, {\r\n      position: \"top-right\",\r\n      autoClose: 3000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n      theme: \"colored\",\r\n    }),\r\n};\r\nexport const Loader = {\r\n  commonLoader() {\r\n    return (\r\n      <Box className=\"d-flex align-items-center justify-content-center common-loader\">\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  },\r\n};\r\n\r\nexport const pathFile = {\r\n  dashboards: \"DashBoard\",\r\n};\r\n\r\n\r\nexport const navigate = () => {\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const getBreadcrumbItems = (pathname) => {\r\n  const breadcrumbMap = {\r\n    \"/app/home\": [{ text: \"Home\", href: \"/\" } , {text:''} ],\r\n\r\n    \"/app/home/runsheet\": [{ text: \"Home\", href: \"/app/home\" }, { text: \"Runsheet (5425)\", href: \"/dashboard\" }],\r\n\r\n\r\n    \"/profile\": [{ text: \"Home\", href: \"/\" },\r\n    { text: \"Profile\", href: \"/profile\" }],\r\n    \"/verify-order\": [{ text: \"Home\", href: \"/\" }\r\n      , { text: \"Orders\", href: \"/orders\" },\r\n    { text: \"Verify Order\", href: \"/verify-order\" }],\r\n    // Add more routes as needed\r\n  };\r\n\r\n  return breadcrumbMap[pathname] || [{ text: \"Home\", href: \"/\" }];\r\n};\r\n\r\n\r\n\r\nexport const loginDetails = () => {\r\n  const items = JSON.parse(localStorage.getItem(\"login\"));\r\n  return items;\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Logo from \"../../Assets/Images/PTRLogo.png\";\r\nimport { Button, FormField, SpaceBetween } from \"@cloudscape-design/components\";\r\nimport { FormHelperText } from \"@mui/material\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { ValidationEngine } from \"Utils/helperFunctions\";\r\nimport { signIn, validateOtp } from \"Redux-Store/Signin/SigninThunk\";\r\n\r\nconst OtpVerification = () => {\r\n  const { number } = useParams();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [seconds, setSeconds] = useState(30);\r\n  const [isActive, setIsActive] = useState(true);\r\n  const [otp, setOtp] = useState(Array(6).fill(\"\"));\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n  const [errorData, setErrorData] = useState({});\r\n  const validateOtpRes = useSelector((state) => state.signin);\r\n\r\n  const handleResentOtp = async () => {\r\n    console.log(\"Calling API with number:\", number);\r\n    const result = await dispatch(signIn({ number, userType: \"rider\" }));\r\n    console.log(\"API response:\", result);\r\n    setSeconds(30);\r\n    setIsActive(true);\r\n    navigate(`/auth/otp-varification/${number}`);\r\n  };\r\n\r\n  const otpValidationSchema = {\r\n    otp: [\r\n      {\r\n        message: \"Please enter the OTP\",\r\n        type: ValidationEngine.type.MANDATORY,\r\n      },\r\n      {\r\n        message: \"OTP must be 6 digits\",\r\n        type: ValidationEngine.type.REGEX,\r\n        regex: /^\\d{6}$/,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const error = ValidationEngine.validate(otpValidationSchema, {\r\n      otp: otp.join(\"\"),\r\n    });\r\n    setErrorData(error);\r\n    return error.isValid;\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    setIsSubmitted(true);\r\n    if (validateForm()) {\r\n      if (!number) {\r\n        setErrorData({ code: { message: \"Mobile number is required.\" } });\r\n        return;\r\n      }\r\n      const session = localStorage.getItem(\"session\");\r\n\r\n      dispatch(validateOtp({ number, code: otp.join(\"\"), userType: \"rider\", session // Pass the session here\r\n      }))\r\n        .unwrap()\r\n        .then((result) => {\r\n          localStorage.setItem(\r\n            \"user\",\r\n            JSON.stringify(result.data.tokens)\r\n          );\r\n          localStorage.setItem(\"id\", JSON.stringify(result.data.user.id));\r\n          localStorage.setItem(\"userinfo\", JSON.stringify(result.data.user));\r\n          localStorage.setItem(\r\n            \"login\",\r\n            JSON.stringify(result.data.tokens.accessToken)\r\n          );\r\n          localStorage.setItem(\r\n            \"refreshToken\",\r\n            JSON.stringify(result.data.tokens.refreshToken)\r\n          );\r\n          console.log(\"OTP verification successful!\"); \r\n\r\n          navigate(\"/app/home\");\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error verifying OTP:\", error);\r\n          setErrorData({\r\n            otp: { message: error.message || \"Error verifying OTP\" },\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleChange = (e, index) => {\r\n    const value = e.target.value;\r\n    if (/^\\d$/.test(value) || value === \"\") {\r\n      const newOtp = [...otp];\r\n      newOtp[index] = value;\r\n      setOtp(newOtp);\r\n      if (value && index < 5)\r\n        document.getElementById(`otp-input-${index + 1}`).focus();\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e, index) => {\r\n    if (e.key === \"Backspace\" && otp[index] === \"\" && index > 0) {\r\n      document.getElementById(`otp-input-${index - 1}`).focus();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let interval = null;\r\n    if (isActive && seconds > 0) {\r\n      interval = setInterval(() => {\r\n        setSeconds((prevSeconds) => prevSeconds - 1);\r\n      }, 1000);\r\n    } else {\r\n      clearInterval(interval);\r\n      setIsActive(false);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [isActive, seconds]);\r\n\r\n  useEffect(() => {\r\n    document.getElementById(\"otp-input-0\")?.focus();\r\n  }, []);\r\n  \r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          padding: '10% 0 4% 0', \r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <img src={Logo} alt=\"\" />\r\n      </div>\r\n      <div>\r\n        <h1>OTP Verification</h1>\r\n        <p style={{ color: \"gray\", width: \"14rem\" }}>\r\n          Enter the <span className=\"highlight\">six-digit code</span> sent to\r\n          your Mobile number\r\n        </p>\r\n      </div>\r\n\r\n      <div>\r\n        <SpaceBetween size=\"m\">\r\n          <FormField\r\n            label=\"Enter OTP\"\r\n            errorText={\r\n              isSubmitted &&\r\n              !errorData.isValid && (\r\n                <FormHelperText error>{errorData.otp?.message}</FormHelperText>\r\n              )\r\n            }\r\n          >\r\n            <div style={{ display: \"flex\", gap: \"10px\" }}>\r\n              {otp.map((digit, index) => (\r\n                <input\r\n                  key={index}\r\n                  id={`otp-input-${index}`}\r\n                  type=\"text\"\r\n                  value={digit}\r\n                  onChange={(e) => handleChange(e, index)}\r\n                  onKeyDown={(e) => {\r\n                    handleKeyDown(e, index);\r\n                    if (index === otp.length - 1 && e.key === \"Enter\") {\r\n                      handleSubmit(); \r\n                    }\r\n                  }}\r\n                  style={{\r\n                    width: \"2.2rem\",\r\n                    textAlign: \"center\",\r\n                    fontSize: \"1.5rem\",\r\n                    height: \"3rem\",\r\n                    border: \"1px solid black\",\r\n                    borderRadius: \"8px\",\r\n                  }}\r\n                />\r\n              ))}\r\n            </div>\r\n          </FormField>\r\n\r\n          {validateOtpRes.status === \"FAILURE\" && (\r\n            <FormHelperText error>\r\n              {validateOtpRes.data?.message || \"Error verifying OTP\"}\r\n            </FormHelperText>\r\n          )}\r\n\r\n          <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n            <Button\r\n              disabled={seconds > 0}\r\n              variant=\"link\"\r\n              onClick={handleResentOtp}\r\n            >\r\n              {seconds > 0 ? `Resend OTP in ${seconds} sec` : \"Resend OTP\"}\r\n            </Button>\r\n          </div>\r\n        </SpaceBetween>\r\n\r\n        <div\r\n          style={{ position: \"absolute\", right: 30, bottom: \"10%\", left: 30 }}\r\n        >\r\n          <Button variant=\"primary\" fullWidth onClick={handleSubmit}>\r\n            Verify OTP\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};  \r\n\r\nexport default OtpVerification;\r\n","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\nconst FormControlContext = /*#__PURE__*/React.createContext(undefined);\nif (process.env.NODE_ENV !== 'production') {\n  FormControlContext.displayName = 'FormControlContext';\n}\nexport default FormControlContext;","export default function formControlState({\n  props,\n  states,\n  muiFormControl\n}) {\n  return states.reduce((acc, state) => {\n    acc[state] = props[state];\n    if (muiFormControl) {\n      if (typeof props[state] === 'undefined') {\n        acc[state] = muiFormControl[state];\n      }\n    }\n    return acc;\n  }, {});\n}","'use client';\n\nimport * as React from 'react';\nimport FormControlContext from './FormControlContext';\nexport default function useFormControl() {\n  return React.useContext(FormControlContext);\n}","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getFormHelperTextUtilityClasses(slot) {\n  return generateUtilityClass('MuiFormHelperText', slot);\n}\nconst formHelperTextClasses = generateUtilityClasses('MuiFormHelperText', ['root', 'error', 'disabled', 'sizeSmall', 'sizeMedium', 'contained', 'focused', 'filled', 'required']);\nexport default formHelperTextClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nvar _span;\nconst _excluded = [\"children\", \"className\", \"component\", \"disabled\", \"error\", \"filled\", \"focused\", \"margin\", \"required\", \"variant\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport formControlState from '../FormControl/formControlState';\nimport useFormControl from '../FormControl/useFormControl';\nimport styled from '../styles/styled';\nimport capitalize from '../utils/capitalize';\nimport formHelperTextClasses, { getFormHelperTextUtilityClasses } from './formHelperTextClasses';\nimport useThemeProps from '../styles/useThemeProps';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    contained,\n    size,\n    disabled,\n    error,\n    filled,\n    focused,\n    required\n  } = ownerState;\n  const slots = {\n    root: ['root', disabled && 'disabled', error && 'error', size && `size${capitalize(size)}`, contained && 'contained', focused && 'focused', filled && 'filled', required && 'required']\n  };\n  return composeClasses(slots, getFormHelperTextUtilityClasses, classes);\n};\nconst FormHelperTextRoot = styled('p', {\n  name: 'MuiFormHelperText',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.size && styles[`size${capitalize(ownerState.size)}`], ownerState.contained && styles.contained, ownerState.filled && styles.filled];\n  }\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  color: (theme.vars || theme).palette.text.secondary\n}, theme.typography.caption, {\n  textAlign: 'left',\n  marginTop: 3,\n  marginRight: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  [`&.${formHelperTextClasses.disabled}`]: {\n    color: (theme.vars || theme).palette.text.disabled\n  },\n  [`&.${formHelperTextClasses.error}`]: {\n    color: (theme.vars || theme).palette.error.main\n  }\n}, ownerState.size === 'small' && {\n  marginTop: 4\n}, ownerState.contained && {\n  marginLeft: 14,\n  marginRight: 14\n}));\nconst FormHelperText = /*#__PURE__*/React.forwardRef(function FormHelperText(inProps, ref) {\n  const props = useThemeProps({\n    props: inProps,\n    name: 'MuiFormHelperText'\n  });\n  const {\n      children,\n      className,\n      component = 'p'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const muiFormControl = useFormControl();\n  const fcs = formControlState({\n    props,\n    muiFormControl,\n    states: ['variant', 'size', 'disabled', 'error', 'filled', 'focused', 'required']\n  });\n  const ownerState = _extends({}, props, {\n    component,\n    contained: fcs.variant === 'filled' || fcs.variant === 'outlined',\n    variant: fcs.variant,\n    size: fcs.size,\n    disabled: fcs.disabled,\n    error: fcs.error,\n    filled: fcs.filled,\n    focused: fcs.focused,\n    required: fcs.required\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(FormHelperTextRoot, _extends({\n    as: component,\n    ownerState: ownerState,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other, {\n    children: children === ' ' ? // notranslate needed while Google Translate will not fix zero-width space issue\n    _span || (_span = /*#__PURE__*/_jsx(\"span\", {\n      className: \"notranslate\",\n      children: \"\\u200B\"\n    })) : children\n  }));\n});\nprocess.env.NODE_ENV !== \"production\" ? FormHelperText.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   *\n   * If `' '` is provided, the component reserves one line height for displaying a future message.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * If `true`, the helper text should be displayed in a disabled state.\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, helper text should be displayed in an error state.\n   */\n  error: PropTypes.bool,\n  /**\n   * If `true`, the helper text should use filled classes key.\n   */\n  filled: PropTypes.bool,\n  /**\n   * If `true`, the helper text should use focused classes key.\n   */\n  focused: PropTypes.bool,\n  /**\n   * If `dense`, will adjust vertical spacing. This is normally obtained via context from\n   * FormControl.\n   */\n  margin: PropTypes.oneOf(['dense']),\n  /**\n   * If `true`, the helper text should use required classes key.\n   */\n  required: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['filled', 'outlined', 'standard']), PropTypes.string])\n} : void 0;\nexport default FormHelperText;"],"names":["ValidationEngine","EMAIL_REGEX","PASSWORD_REGEX","MOBILE_NUMBER_REGEX","NUMBER_ONLY_REGEX","DECIMAL_ALLOW_REGEX","ONLY_TWO_DECIMAL_ALLOW_REGEX","type","MANDATORY","REGEX","CHARACTERCOUNT","validate","validationJSON","data","validateMandatory","validationObject","value","isValid","error","message","validateCharacterCount","length","CharacterCout","validateRegex","regex","test","keys","Object","errors","errorObj","forEach","key","validationArray","validationObj","OtpVerification","_errorData$otp","_validateOtpRes$data","number","useParams","dispatch","useDispatch","navigate","useNavigate","seconds","setSeconds","useState","isActive","setIsActive","otp","setOtp","Array","fill","isSubmitted","setIsSubmitted","errorData","setErrorData","validateOtpRes","useSelector","state","signin","otpValidationSchema","handleSubmit","validateForm","join","code","session","localStorage","getItem","validateOtp","userType","unwrap","then","result","setItem","JSON","stringify","tokens","user","id","accessToken","refreshToken","console","log","catch","useEffect","interval","setInterval","prevSeconds","clearInterval","_document$getElementB","document","getElementById","focus","_jsxs","_Fragment","children","_jsx","style","display","padding","justifyContent","alignItems","src","Logo","alt","color","width","className","SpaceBetween","size","FormField","label","errorText","FormHelperText","gap","map","digit","index","concat","onChange","e","handleChange","target","newOtp","onKeyDown","handleKeyDown","textAlign","fontSize","height","border","borderRadius","status","Button","disabled","variant","onClick","async","signIn","position","right","bottom","left","fullWidth","React","undefined","formControlState","_ref","props","states","muiFormControl","reduce","acc","useFormControl","FormControlContext","getFormHelperTextUtilityClasses","slot","generateUtilityClass","generateUtilityClasses","_span","_excluded","FormHelperTextRoot","styled","name","overridesResolver","styles","ownerState","root","capitalize","contained","filled","theme","_extends","vars","palette","text","secondary","typography","caption","marginTop","marginRight","marginBottom","marginLeft","formHelperTextClasses","main","inProps","ref","useThemeProps","component","other","_objectWithoutPropertiesLoose","fcs","focused","required","classes","slots","composeClasses","useUtilityClasses","as","clsx"],"sourceRoot":""}