"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[415],{2796:(e,r,i)=>{i.r(r),i.d(r,{default:()=>g});var s=i(6421),l=i(2521),a=i(8003),t=i(5336),n=i(2671),d=i(3091),c=i(831),o=i(4521),h=i(145),u=i(8811),m=i(7456),v=i(5043),x=i(3216),j=i(3003),p=i(9272),y=i(579);const g=()=>{var e,r,i,g;const{runsheetId:A,orderId:b}=(0,x.g)(),f=(0,x.Zp)(),I=(0,j.wA)(),[C,k]=(0,v.useState)(!1),[z,w]=(0,v.useState)(""),[N,S]=(0,v.useState)(""),[O,D]=(0,v.useState)(!1),H=(0,j.d4)((e=>e.runsheet.runsheetDetail)),P=null===H||void 0===H||null===(e=H.orders)||void 0===e?void 0:e.find((e=>e.id===b));(0,v.useEffect)((()=>{if(!H||H.id!==A){var e;const r=null===(e=localStorage.getItem("id"))||void 0===e?void 0:e.replace(/['"]+/g,"");r&&I((0,p.w6)({riderId:r,runsheetId:A}))}}),[I,H,A]);return P?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.A,{variant:"h2",children:(0,y.jsxs)(a.A,{size:"xs",alignItems:"center",direction:"horizontal",children:[(0,y.jsx)(t.A,{onClick:()=>f(-1),variant:"icon",iconName:"arrow-left"}),(0,y.jsx)("span",{className:"header_underline",children:"Customer Details"})]})}),(0,y.jsx)("div",{style:{marginTop:22},children:(0,y.jsxs)(n.A,{header:(0,y.jsx)(l.A,{children:(0,y.jsxs)(a.A,{direction:"horizontal",size:"xs",alignItems:"center",children:[(0,y.jsx)("span",{style:{color:"#0972D3"},children:P.customerName}),(0,y.jsx)(d.A,{children:P.paymentMethod})]})}),footer:(0,y.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"80%"},children:P.customerNumber?(0,y.jsx)("a",{href:"tel:+91".concat(String(P.customerNumber)),style:{width:"100%"},children:(0,y.jsx)(t.A,{fullWidth:!0,variant:"primary",iconName:"call",children:"Call"})}):(0,y.jsx)("p",{children:"No contact number available"})}),children:[null===(r=P.address)||void 0===r?void 0:r.address,", ",null===(i=P.address)||void 0===i?void 0:i.zipCode]})}),(0,y.jsx)("div",{style:{marginTop:10,marginBottom:12},children:(0,y.jsx)(l.A,{variant:"h3",children:(0,y.jsxs)(a.A,{direction:"horizontal",size:"xs",alignItems:"center",children:["Items list ",(0,y.jsxs)(s.A,{variant:"p",children:["(",null===(g=P.items)||void 0===g?void 0:g.length," Items)"]})]})})}),(0,y.jsx)(n.A,{header:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(l.A,{variant:"h3",children:["Order ID : ",P.id]}),(0,y.jsxs)("p",{style:{margin:0},children:["Amount to be collected:"," ",(0,y.jsxs)("span",{style:{fontWeight:"bold"},children:["\u20b9",P.totalPrice]})]})]}),children:(0,y.jsxs)(a.A,{size:"m",children:[(0,y.jsx)(c.A,{columnDefinitions:[{id:"products",header:"Products",cell:e=>(0,y.jsx)(a.A,{size:"xs",alignItems:"center",direction:"horizontal",children:P.items.map(((e,r)=>(0,y.jsx)("span",{children:e.productName},r)))})},{id:"quantity",header:"Qty",cell:e=>e.quantity},{id:"price",header:"Price",cell:e=>e.price}],items:P.items.map(((e,r)=>({...e,key:r}))),variant:"embedded",stickyHeader:!0}),(0,y.jsxs)(a.A,{direction:"vertical",size:"xs",children:[(0,y.jsx)("div",{style:{width:"80%",margin:"0 auto",display:"flex"},children:(0,y.jsx)(t.A,{onClick:()=>f("/app/home/runsheet/".concat(A,"/order/").concat(P.id,"/customer-details/verify-order")),fullWidth:!0,variant:"primary",children:"Confirm Order"})}),(0,y.jsx)("button",{onClick:()=>k(!0),className:"custom-button",children:"Cancel"})]})]})}),(0,y.jsx)(o.A,{onDismiss:()=>k(!1),visible:C,header:"Cancel Order",children:(0,y.jsxs)(a.A,{size:"l",children:[(0,y.jsx)(h.A,{onChange:e=>{let{detail:r}=e;return w(r.value)},value:z,items:[{value:"Requested for reschedule",label:"Requested for reschedule"},{value:"Customer no response",label:"Customer no response"},{value:"Heavy Rain",label:"Heavy Rain"},{value:"Incomplete Address",label:"Incomplete Address"},{value:"Security Instability",label:"Security Instability"},{value:"Heavy Load",label:"Heavy Load"},{value:"Order rejected by customer",label:"Order rejected by customer"}].map(((e,r)=>({...e,key:r})))}),(0,y.jsx)(u.A,{label:"Notes Other Issues",children:(0,y.jsx)(m.A,{value:N,onChange:e=>S(e.detail.value),placeholder:"Write Here Issue!"})}),(0,y.jsxs)(a.A,{size:"xs",children:[(0,y.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"80%"},children:(0,y.jsx)(t.A,{variant:"primary",onClick:async()=>{var e;if(!z&&!N)return void alert("Please select a reason or add a note for cancellation.");const r=null===(e=localStorage.getItem("id"))||void 0===e?void 0:e.replace(/['"]+/g,"");if(!r||!A||!b)return void alert("Missing required parameters. Please check again.");const i={id:r,runsheetId:A,orderId:b,reason:z||N};try{D(!0),await I((0,p.zM)(i)).unwrap(),D(!1),f(-1)}catch(s){console.error("Failed to cancel order:",s),D(!1),alert(s.message||"Failed to cancel order. Please try again.")}},fullWidth:!0,loading:O,children:"Ok"})}),(0,y.jsx)("button",{onClick:()=>k(!1),className:"custom-button",children:"Go Back"})]})]})})]}):(0,y.jsx)(s.A,{variant:"h3",children:"Order not found"})}}}]);
//# sourceMappingURL=415.7323dae3.chunk.js.map