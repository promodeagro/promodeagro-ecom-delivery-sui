{"version":3,"file":"static/js/415.23cfa581.chunk.js","mappings":"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","sources":["Views/Postlogin/Home/Pending/CustomerDetails/index.js"],"sourcesContent":["import {\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  FormField,\r\n  Header,\r\n  Modal,\r\n  RadioGroup,\r\n  SpaceBetween,\r\n  Table,\r\n  Textarea,\r\n} from \"@cloudscape-design/components\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchRunsheetDetail, cancelOrderAPI } from \"Redux-Store/Home/homeThunk\";\r\n\r\nconst CustomerDetails = () => {\r\n  const { runsheetId, orderId } = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [visible, setVisible] = useState(false);\r\n  const [reason, setReason] = useState(\"\");\r\n  const [otherIssue, setOtherIssue] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const runsheetDetail = useSelector((state) => state.runsheet.runsheetDetail);\r\n  const order = runsheetDetail?.orders?.find((o) => o.id === orderId);\r\n\r\n  useEffect(() => {\r\n    if (!runsheetDetail || runsheetDetail.id !== runsheetId) {\r\n      const riderId = localStorage.getItem(\"id\")?.replace(/['\"]+/g, \"\");\r\n      if (riderId) {\r\n        dispatch(fetchRunsheetDetail({ riderId, runsheetId }));\r\n      }\r\n    }\r\n  }, [dispatch, runsheetDetail, runsheetId]);\r\n\r\n  const handleCancelOrder = async () => {\r\n    if (!reason && !otherIssue) {\r\n      alert(\"Please select a reason or add a note for cancellation.\");\r\n      return;\r\n    }\r\n  \r\n    const id = localStorage.getItem(\"id\")?.replace(/['\"]+/g, \"\"); // Retrieve rider ID as 'id'\r\n  \r\n    if (!id || !runsheetId || !orderId) {\r\n      alert(\"Missing required parameters. Please check again.\");\r\n      return;\r\n    }\r\n  \r\n    const payload = {\r\n      id, // Use 'id' instead of 'riderId'\r\n      runsheetId,\r\n      orderId,\r\n      reason: reason || otherIssue,\r\n    };\r\n  \r\n  \r\n    try {\r\n      setLoading(true);\r\n      await dispatch(cancelOrderAPI(payload)).unwrap();\r\n      setLoading(false);\r\n      navigate(-1); // Navigate back on success\r\n    } catch (error) {\r\n      console.error(\"Failed to cancel order:\", error);\r\n      setLoading(false);\r\n      alert(error.message || \"Failed to cancel order. Please try again.\");\r\n    }\r\n  };\r\n  \r\n  if (!order) {\r\n    return <Box variant=\"h3\">Order not found</Box>;\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {/* Main Content */}\r\n      <Header variant=\"h2\">\r\n        <SpaceBetween size=\"xs\" alignItems=\"center\" direction=\"horizontal\">\r\n          <Button\r\n            onClick={() => navigate(-1)}\r\n            variant=\"icon\"\r\n            iconName=\"arrow-left\"\r\n          />\r\n          <span className=\"header_underline\">Customer Details</span>\r\n        </SpaceBetween>\r\n      </Header>\r\n      <div style={{ marginTop: 22 }}>\r\n        <Container\r\n          header={\r\n            <Header>\r\n              <SpaceBetween\r\n                direction=\"horizontal\"\r\n                size=\"xs\"\r\n                alignItems=\"center\"\r\n              >\r\n                <span style={{ color: \"#0972D3\" }}>{order.customerName}</span>\r\n                <Badge>{order.paymentMethod}</Badge>\r\n              </SpaceBetween>\r\n            </Header>\r\n          }\r\n          \r\n          footer={\r\n            <div style={{ display: \"flex\", margin: \"0 auto\", width: \"80%\" }}>\r\n              {order.customerNumber ? (\r\n                <a\r\n                  href={`tel:+91${String(order.customerNumber)}`}\r\n                  style={{ width: \"100%\" }}\r\n                >\r\n                  <Button fullWidth variant=\"primary\" iconName=\"call\">\r\n                    Call\r\n                  </Button>\r\n                </a>\r\n              ) : (\r\n                <p>No contact number available</p>\r\n              )}\r\n            </div>\r\n          }\r\n        >\r\n          {order.address?.address}, {order.address?.zipCode}\r\n        </Container>\r\n      </div>\r\n      <div style={{ marginTop: 10, marginBottom: 12 }}>\r\n        <Header variant=\"h3\">\r\n          <SpaceBetween direction=\"horizontal\" size=\"xs\" alignItems=\"center\">\r\n            Items list <Box variant=\"p\">({order.items?.length} Items)</Box>\r\n          </SpaceBetween>\r\n        </Header>\r\n      </div>\r\n      <Container\r\n        header={\r\n          <>\r\n            <Header variant=\"h3\">Order ID : {order.id}</Header>\r\n            <p style={{ margin: 0 }}>\r\n              Amount to be collected:{\" \"}\r\n              <span style={{ fontWeight: \"bold\" }}>â‚¹{order.totalPrice}</span>\r\n            </p>\r\n          </>\r\n        }\r\n      >\r\n        <SpaceBetween size=\"m\">\r\n          <Table\r\n            columnDefinitions={[\r\n              {\r\n                id: \"products\",\r\n                header: \"Products\",\r\n                cell: (item) => (\r\n                  <SpaceBetween size=\"xxs\" direction=\"horizontal\">\r\n                    <span>{item.productName}</span>\r\n                  </SpaceBetween>\r\n                ),\r\n              },\r\n              {\r\n                id: \"quantity\",\r\n                header: \"Qty\",\r\n                cell: (item) => item.quantity,\r\n              },\r\n              {\r\n                id: \"price\",\r\n                header: \"Price\",\r\n                cell: (item) => item.price,\r\n              },\r\n            ]}\r\n            items={order.items}\r\n            variant=\"embedded\"\r\n            stickyHeader={true}\r\n          />\r\n          <SpaceBetween direction=\"vertical\" size=\"xs\">\r\n            <div style={{ width: \"80%\", margin: \"0 auto\", display: \"flex\" }}>\r\n              <Button\r\n                onClick={() =>\r\n                  navigate(`/app/home/runsheet/${runsheetId}/customer-details/${order.id}/verify-order`)\r\n                }\r\n                fullWidth\r\n                variant=\"primary\"\r\n              >\r\n                Confirm Order\r\n              </Button>\r\n            </div>\r\n            <button onClick={() => setVisible(true)} className=\"custom-button\">\r\n              Cancel\r\n            </button>\r\n          </SpaceBetween>\r\n        </SpaceBetween>\r\n      </Container>\r\n\r\n      {/* Cancel Order Modal */}\r\n      <Modal\r\n        onDismiss={() => setVisible(false)}\r\n        visible={visible}\r\n        header=\"Cancel Order\"\r\n      >\r\n        <SpaceBetween size=\"l\">\r\n          <RadioGroup\r\n            onChange={({ detail }) => setReason(detail.value)}\r\n            value={reason}\r\n            items={[\r\n              { value: \"Requested for reschedule\", label: \"Requested for reschedule\" },\r\n              { value: \"Customer no response\", label: \"Customer no response\" },\r\n              { value: \"Heavy Rain\", label: \"Heavy Rain\" },\r\n              { value: \"Incomplete Address\", label: \"Incomplete Address\" },\r\n              { value: \"Security Instability\", label: \"Security Instability\" },\r\n              { value: \"Heavy Load\", label: \"Heavy Load\" },\r\n              { value: \"Order rejected by customer\", label: \"Order rejected by customer\" },\r\n            ]}\r\n          />\r\n          <FormField label=\"Notes Other Issues\">\r\n            <Textarea\r\n              value={otherIssue}\r\n              onChange={(e) => setOtherIssue(e.detail.value)}\r\n              placeholder=\"Write Here Issue!\"\r\n            />\r\n          </FormField>\r\n          <SpaceBetween size=\"xs\">\r\n          <div style={{display:'flex', margin:'0 auto', width: '80%'}}>\r\n          <Button variant=\"primary\" onClick={handleCancelOrder} fullWidth loading={loading}>\r\n            Ok\r\n          </Button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => setVisible(false)}\r\n            fullWidth\r\n            className=\"custom-button\"\r\n          >\r\n            Go Back\r\n          </button></SpaceBetween>\r\n        </SpaceBetween>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomerDetails;\r\n"],"names":["CustomerDetails","_runsheetDetail$order","_order$address","_order$address2","_order$items","runsheetId","orderId","useParams","navigate","useNavigate","dispatch","useDispatch","visible","setVisible","useState","reason","setReason","otherIssue","setOtherIssue","loading","setLoading","runsheetDetail","useSelector","state","runsheet","order","orders","find","o","id","useEffect","_localStorage$getItem","riderId","localStorage","getItem","replace","fetchRunsheetDetail","_jsxs","_Fragment","children","_jsx","Header","variant","SpaceBetween","size","alignItems","direction","Button","onClick","iconName","className","style","marginTop","Container","header","color","customerName","Badge","paymentMethod","footer","display","margin","width","customerNumber","href","concat","String","fullWidth","address","zipCode","marginBottom","Box","items","length","fontWeight","totalPrice","Table","columnDefinitions","cell","item","productName","quantity","price","stickyHeader","Modal","onDismiss","RadioGroup","onChange","_ref","detail","value","label","FormField","Textarea","e","placeholder","async","_localStorage$getItem2","alert","payload","cancelOrderAPI","unwrap","error","console","message"],"sourceRoot":""}