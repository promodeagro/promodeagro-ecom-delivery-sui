{"version":3,"file":"static/js/796.e863f68b.chunk.js","mappings":"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","sources":["Views/Postlogin/Home/Pending/CustomerDetails/index.js"],"sourcesContent":["import {\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  FormField,\r\n  Header,\r\n  Modal,\r\n  RadioGroup,\r\n  SpaceBetween,\r\n  Table,\r\n  Textarea,\r\n} from \"@cloudscape-design/components\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { fetchRunsheetDetail, cancelOrderAPI } from \"Redux-Store/Home/homeThunk\";\r\n\r\nconst CustomerDetails = () => {\r\n  const { runsheetId, orderId } = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const [visible, setVisible] = useState(false);\r\n  const [reason, setReason] = useState(\"\");\r\n  const [otherIssue, setOtherIssue] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const runsheetDetail = useSelector((state) => state.runsheet.runsheetDetail?.data);\r\n  const order = runsheetDetail?.orders?.find((o) => o.id === orderId);\r\n  console.log('Order ID:', orderId);  // Log to verify the URL parameter\r\n  console.log('Orders:', runsheetDetail?.orders);  // Log to inspect the orders\r\n  \r\n  useEffect(() => {\r\n    console.log('Runsheet Detail:', runsheetDetail); // Log to inspect the structure\r\n    if (!runsheetDetail || runsheetDetail.id !== runsheetId) {\r\n      const riderId = localStorage.getItem(\"id\")?.replace(/['\"]+/g, \"\");\r\n      if (riderId) {\r\n        dispatch(fetchRunsheetDetail({ riderId, runsheetId }));\r\n      }\r\n    }\r\n  }, [dispatch, runsheetDetail, runsheetId]);\r\n  \r\n  \r\n\r\n  const handleCancelOrder = async () => {\r\n    if (!reason && !otherIssue) {\r\n      alert(\"Please select a reason or add a note for cancellation.\");\r\n      return;\r\n    }\r\n  \r\n    const id = localStorage.getItem(\"id\")?.replace(/['\"]+/g, \"\"); // Retrieve rider ID as 'id'\r\n  \r\n    if (!runsheetDetail || runsheetDetail.status === \"loading\") {\r\n      return <Box variant=\"h3\">Loading...</Box>;\r\n    }\r\n    \r\n    if (!order) {\r\n      return <Box variant=\"h3\">Order not found</Box>;\r\n    }\r\n    \r\n  \r\n    const payload = {\r\n      id, // Use 'id' instead of 'riderId'\r\n      runsheetId,\r\n      orderId,\r\n      reason: reason || otherIssue,\r\n    };\r\n  \r\n  \r\n    try {\r\n      setLoading(true);\r\n      await dispatch(cancelOrderAPI(payload)).unwrap();\r\n      setLoading(false);\r\n      navigate(-1); // Navigate back on success\r\n    } catch (error) {\r\n      console.error(\"Failed to cancel order:\", error);\r\n      setLoading(false);\r\n      alert(error.message || \"Failed to cancel order. Please try again.\");\r\n    }\r\n  };\r\n  \r\n  if (!order) {\r\n    return <Box variant=\"h3\">Order not found</Box>;\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      {/* Main Content */}\r\n      <Header variant=\"h2\">\r\n        <SpaceBetween size=\"xs\" alignItems=\"center\" direction=\"horizontal\">\r\n          <Button\r\n            onClick={() => navigate(-1)}\r\n            variant=\"icon\"\r\n            iconName=\"arrow-left\"\r\n          />\r\n          <span className=\"header_underline\">Customer Details</span>\r\n        </SpaceBetween>\r\n      </Header>\r\n      <div style={{ marginTop: 22 }}>\r\n        <Container\r\n          header={\r\n            <Header>\r\n              <SpaceBetween\r\n                direction=\"horizontal\"\r\n                size=\"xs\"\r\n                alignItems=\"center\"\r\n              >\r\n                <span style={{ color: \"#0972D3\" }}>{order.customerName}</span>\r\n                <Badge>{order.paymentDetails?.method}</Badge>\r\n              </SpaceBetween>\r\n            </Header>\r\n          }\r\n          \r\n          footer={\r\n            <div style={{ display: \"flex\", margin: \"0 auto\", width: \"80%\" }}>\r\n              {order.customerNumber ? (\r\n                <a\r\n                  href={`tel:+91${String(order.customerNumber)}`}\r\n                  style={{ width: \"100%\" }}\r\n                >\r\n                  <Button fullWidth variant=\"primary\" iconName=\"call\">\r\n                    Call\r\n                  </Button>\r\n                </a>\r\n              ) : (\r\n                <p>No contact number available</p>\r\n              )}\r\n            </div>\r\n          }\r\n        >\r\n          {order.address?.address}, {order.address?.zipCode}\r\n        </Container>\r\n      </div>\r\n      <div style={{ marginTop: 10, marginBottom: 12 }}>\r\n        <Header variant=\"h3\">\r\n          <SpaceBetween direction=\"horizontal\" size=\"xs\" alignItems=\"center\">\r\n            Items list <Box variant=\"p\">({order.items?.length} Items)</Box>\r\n          </SpaceBetween>\r\n        </Header>\r\n      </div>\r\n      <Container\r\n        header={\r\n          <>\r\n            <Header variant=\"h3\">Order ID : {order.id}</Header>\r\n            <p style={{ margin: 0 }}>\r\n              Amount to be collected:{\" \"}\r\n              <span style={{ fontWeight: \"bold\" }}>â‚¹{order.totalPrice}</span>\r\n            </p>\r\n          </>\r\n        }\r\n      >\r\n        <SpaceBetween size=\"m\">\r\n          <Table\r\n            columnDefinitions={[\r\n              {\r\n                id: \"products\",\r\n                header: \"Products\",\r\n                cell: (item) => (\r\n                  <SpaceBetween size=\"xxs\" direction=\"horizontal\">\r\n                    <span>{item.productName}</span>\r\n                  </SpaceBetween>\r\n                ),\r\n              },\r\n              {\r\n                id: \"quantity\",\r\n                header: \"Qty\",\r\n                cell: (item) => item.quantity,\r\n              },\r\n              {\r\n                id: \"price\",\r\n                header: \"Price\",\r\n                cell: (item) => item.price,\r\n              },\r\n            ]}\r\n            items={order.items}\r\n            variant=\"embedded\"\r\n            stickyHeader={true}\r\n          />\r\n          <SpaceBetween direction=\"vertical\" size=\"xs\">\r\n            <div style={{ width: \"80%\", margin: \"0 auto\", display: \"flex\" }}>\r\n              <Button\r\n                onClick={() =>\r\n                  navigate(`/app/home/runsheet/${runsheetId}/order/${order.id}/customer-details/verify-order`)\r\n                }\r\n                fullWidth\r\n                variant=\"primary\"\r\n              >\r\n                Confirm Order\r\n              </Button>\r\n            </div>\r\n            <button onClick={() => setVisible(true)} className=\"custom-button\">\r\n              Cancel\r\n            </button>\r\n          </SpaceBetween>\r\n        </SpaceBetween>\r\n      </Container>\r\n\r\n      {/* Cancel Order Modal */}\r\n      <Modal\r\n        onDismiss={() => setVisible(false)}\r\n        visible={visible}\r\n        header=\"Cancel Order\"\r\n      >\r\n        <SpaceBetween size=\"l\">\r\n          <RadioGroup\r\n            onChange={({ detail }) => setReason(detail.value)}\r\n            value={reason}\r\n            items={[\r\n              { value: \"Requested for reschedule\", label: \"Requested for reschedule\" },\r\n              { value: \"Customer no response\", label: \"Customer no response\" },\r\n              { value: \"Heavy Rain\", label: \"Heavy Rain\" },\r\n              { value: \"Incomplete Address\", label: \"Incomplete Address\" },\r\n              { value: \"Security Instability\", label: \"Security Instability\" },\r\n              { value: \"Heavy Load\", label: \"Heavy Load\" },\r\n              { value: \"Order rejected by customer\", label: \"Order rejected by customer\" },\r\n            ]}\r\n          />\r\n          <FormField label=\"Notes Other Issues\">\r\n            <Textarea\r\n              value={otherIssue}\r\n              onChange={(e) => setOtherIssue(e.detail.value)}\r\n              placeholder=\"Write Here Issue!\"\r\n            />\r\n          </FormField>\r\n          <SpaceBetween size=\"xs\">\r\n          <div style={{display:'flex', margin:'0 auto', width: '80%'}}>\r\n          <Button variant=\"primary\" onClick={handleCancelOrder} fullWidth loading={loading}>\r\n            Ok\r\n          </Button>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => setVisible(false)}\r\n            className=\"custom-button\"\r\n          >\r\n            Go Back\r\n          </button></SpaceBetween>\r\n        </SpaceBetween>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomerDetails;\r\n"],"names":["CustomerDetails","_runsheetDetail$order","_order$paymentDetails","_order$address","_order$address2","_order$items","runsheetId","orderId","useParams","navigate","useNavigate","dispatch","useDispatch","visible","setVisible","useState","reason","setReason","otherIssue","setOtherIssue","loading","setLoading","runsheetDetail","useSelector","state","_state$runsheet$runsh","runsheet","data","order","orders","find","o","id","console","log","useEffect","_localStorage$getItem","riderId","localStorage","getItem","replace","fetchRunsheetDetail","_jsxs","_Fragment","children","_jsx","Header","variant","SpaceBetween","size","alignItems","direction","Button","onClick","iconName","className","style","marginTop","Container","header","color","customerName","Badge","paymentDetails","method","footer","display","margin","width","customerNumber","href","concat","String","fullWidth","address","zipCode","marginBottom","Box","items","length","fontWeight","totalPrice","Table","columnDefinitions","cell","item","productName","quantity","price","stickyHeader","Modal","onDismiss","RadioGroup","onChange","_ref","detail","value","label","FormField","Textarea","e","placeholder","async","_localStorage$getItem2","alert","status","payload","cancelOrderAPI","unwrap","error","message"],"sourceRoot":""}