"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[796],{2796:(e,r,i)=>{i.r(r),i.d(r,{default:()=>g});var l=i(6421),s=i(2521),a=i(8003),t=i(5336),n=i(2671),d=i(3091),o=i(831),c=i(4521),u=i(145),h=i(8811),v=i(7456),m=i(5043),x=i(3216),j=i(3003),p=i(9272),y=i(579);const g=()=>{var e,r,i,g,A;const{runsheetId:b,orderId:f}=(0,x.g)(),I=(0,x.Zp)(),C=(0,j.wA)(),[z,k]=(0,m.useState)(!1),[w,N]=(0,m.useState)(""),[O,D]=(0,m.useState)(""),[S,H]=(0,m.useState)(!1),P=(0,j.d4)((e=>{var r;return null===(r=e.runsheet.runsheetDetail)||void 0===r?void 0:r.data})),R=null===P||void 0===P||null===(e=P.orders)||void 0===e?void 0:e.find((e=>e.id===f));console.log("Order ID:",f),console.log("Orders:",null===P||void 0===P?void 0:P.orders),(0,m.useEffect)((()=>{if(console.log("Runsheet Detail:",P),!P||P.id!==b){var e;const r=null===(e=localStorage.getItem("id"))||void 0===e?void 0:e.replace(/['"]+/g,"");r&&C((0,p.w6)({riderId:r,runsheetId:b}))}}),[C,P,b]);return R?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.A,{variant:"h2",children:(0,y.jsxs)(a.A,{size:"xs",alignItems:"center",direction:"horizontal",children:[(0,y.jsx)(t.A,{onClick:()=>I(-1),variant:"icon",iconName:"arrow-left"}),(0,y.jsx)("span",{className:"header_underline",children:"Customer Details"})]})}),(0,y.jsx)("div",{style:{marginTop:22},children:(0,y.jsxs)(n.A,{header:(0,y.jsx)(s.A,{children:(0,y.jsxs)(a.A,{direction:"horizontal",size:"xs",alignItems:"center",children:[(0,y.jsx)("span",{style:{color:"#0972D3"},children:R.customerName}),(0,y.jsx)(d.A,{children:null===(r=R.paymentDetails)||void 0===r?void 0:r.method})]})}),footer:(0,y.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"80%"},children:R.customerNumber?(0,y.jsx)("a",{href:"tel:+91".concat(String(R.customerNumber)),style:{width:"100%"},children:(0,y.jsx)(t.A,{fullWidth:!0,variant:"primary",iconName:"call",children:"Call"})}):(0,y.jsx)("p",{children:"No contact number available"})}),children:[null===(i=R.address)||void 0===i?void 0:i.address,", ",null===(g=R.address)||void 0===g?void 0:g.zipCode]})}),(0,y.jsx)("div",{style:{marginTop:10,marginBottom:12},children:(0,y.jsx)(s.A,{variant:"h3",children:(0,y.jsxs)(a.A,{direction:"horizontal",size:"xs",alignItems:"center",children:["Items list ",(0,y.jsxs)(l.A,{variant:"p",children:["(",null===(A=R.items)||void 0===A?void 0:A.length," Items)"]})]})})}),(0,y.jsx)(n.A,{header:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(s.A,{variant:"h3",children:["Order ID : ",R.id]}),(0,y.jsxs)("p",{style:{margin:0},children:["Amount to be collected:"," ",(0,y.jsxs)("span",{style:{fontWeight:"bold"},children:["\u20b9",R.totalPrice]})]})]}),children:(0,y.jsxs)(a.A,{size:"m",children:[(0,y.jsx)(o.A,{columnDefinitions:[{id:"products",header:"Products",cell:e=>(0,y.jsx)(a.A,{size:"xxs",direction:"horizontal",children:(0,y.jsx)("span",{children:e.productName})})},{id:"quantity",header:"Qty",cell:e=>e.quantity},{id:"price",header:"Price",cell:e=>e.price}],items:R.items,variant:"embedded",stickyHeader:!0}),(0,y.jsxs)(a.A,{direction:"vertical",size:"xs",children:[(0,y.jsx)("div",{style:{width:"80%",margin:"0 auto",display:"flex"},children:(0,y.jsx)(t.A,{onClick:()=>I("/app/home/runsheet/".concat(b,"/order/").concat(R.id,"/customer-details/verify-order")),fullWidth:!0,variant:"primary",children:"Confirm Order"})}),(0,y.jsx)("button",{onClick:()=>k(!0),className:"custom-button",children:"Cancel"})]})]})}),(0,y.jsx)(c.A,{onDismiss:()=>k(!1),visible:z,header:"Cancel Order",children:(0,y.jsxs)(a.A,{size:"l",children:[(0,y.jsx)(u.A,{onChange:e=>{let{detail:r}=e;return N(r.value)},value:w,items:[{value:"Requested for reschedule",label:"Requested for reschedule"},{value:"Customer no response",label:"Customer no response"},{value:"Heavy Rain",label:"Heavy Rain"},{value:"Incomplete Address",label:"Incomplete Address"},{value:"Security Instability",label:"Security Instability"},{value:"Heavy Load",label:"Heavy Load"},{value:"Order rejected by customer",label:"Order rejected by customer"}]}),(0,y.jsx)(h.A,{label:"Notes Other Issues",children:(0,y.jsx)(v.A,{value:O,onChange:e=>D(e.detail.value),placeholder:"Write Here Issue!"})}),(0,y.jsxs)(a.A,{size:"xs",children:[(0,y.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"80%"},children:(0,y.jsx)(t.A,{variant:"primary",onClick:async()=>{var e;if(!w&&!O)return void alert("Please select a reason or add a note for cancellation.");const r=null===(e=localStorage.getItem("id"))||void 0===e?void 0:e.replace(/['"]+/g,"");if(!P||"loading"===P.status)return(0,y.jsx)(l.A,{variant:"h3",children:"Loading..."});if(!R)return(0,y.jsx)(l.A,{variant:"h3",children:"Order not found"});const i={id:r,runsheetId:b,orderId:f,reason:w||O};try{H(!0),await C((0,p.zM)(i)).unwrap(),H(!1),I(-1)}catch(s){console.error("Failed to cancel order:",s),H(!1),alert(s.message||"Failed to cancel order. Please try again.")}},fullWidth:!0,loading:S,children:"Ok"})}),(0,y.jsx)("button",{onClick:()=>k(!1),className:"custom-button",children:"Go Back"})]})]})})]}):(0,y.jsx)(l.A,{variant:"h3",children:"Order not found"})}}}]);
//# sourceMappingURL=796.e863f68b.chunk.js.map