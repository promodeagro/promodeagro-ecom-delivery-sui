{"version":3,"file":"static/js/219.1adf6b41.chunk.js","mappings":"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","sources":["Views/Postlogin/Home/Pending/CustomerDetails/Captureorder/index.js"],"sourcesContent":["import { Button } from \"@cloudscape-design/components\";\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Icon from \"@cloudscape-design/components/icon\";\r\n\r\nconst VerifiedOrder = () => {\r\n  const navigate = useNavigate();\r\n  const [visible, setVisible] = useState(false);\r\n  const [isCaptured, setIsCaptured] = useState(false);\r\n  const [photo, setPhoto] = useState(null);\r\n  const [isPhotoTaken, setIsPhotoTaken] = useState(false);\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  const startCamera = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: { facingMode: \"environment\" },\r\n      });\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = stream;\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error accessing the camera: \", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    startCamera();\r\n    return () => {\r\n      if (videoRef.current) {\r\n        const stream = videoRef.current.srcObject;\r\n        const tracks = stream?.getTracks();\r\n        tracks?.forEach((track) => track.stop());\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleTakePhoto = () => {\r\n    if (!isPhotoTaken) {\r\n      if (videoRef.current && canvasRef.current) {\r\n        const context = canvasRef.current.getContext(\"2d\");\r\n        canvasRef.current.width = videoRef.current.videoWidth;\r\n        canvasRef.current.height = videoRef.current.videoHeight;\r\n        context.drawImage(\r\n          videoRef.current,\r\n          0,\r\n          0,\r\n          canvasRef.current.width,\r\n          canvasRef.current.height\r\n        );\r\n        const photoUrl = canvasRef.current.toDataURL(\"image/jpeg\");\r\n        setPhoto(photoUrl);\r\n        setIsCaptured(true);\r\n        setIsPhotoTaken(true);\r\n      }\r\n      setVisible(true); \r\n      setTimeout(() => {\r\n        setVisible(false);\r\n      }, 2000);\r\n    } else {\r\n      \r\n      setPhoto(null);\r\n      setIsPhotoTaken(false);\r\n      setIsCaptured(false);\r\n      startCamera(); \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        position: \"absolute\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100%\",\r\n        flexDirection: \"column\",\r\n        backgroundColor: \"#000716\",\r\n\r\n      }}\r\n    >\r\n      {!isPhotoTaken && (\r\n        <div\r\n          style={{\r\n            height: \"88vh\",\r\n            width: \"100%\",\r\n            backgroundColor: \"#000716\",\r\n          }}\r\n        >\r\n          <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            playsInline\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              position: \"absolute\",\r\n              left: 0,\r\n              top: 0,\r\n            }}\r\n          />\r\n          <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n        </div>\r\n      )}\r\n      {isPhotoTaken && (\r\n        <div\r\n          style={{\r\n            width: \"100%\",\r\n            height: \"88vh\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            backgroundColor: \"#000716\",\r\n          }}\r\n        >\r\n          <img\r\n            src={photo}\r\n            alt=\"Captured\"\r\n            style={{ width: \"80%\", height: \"auto\" }}\r\n          />\r\n        </div>\r\n      )}\r\n      <div\r\n        className=\"flex jcc aic\"\r\n        style={{\r\n          width: \"100%\",\r\n          gap: 20,\r\n          flexDirection: \"column\",\r\n          height: \"24vh\",\r\n          position: \"absolute\",\r\n          bottom: 0,\r\n          background: \"#000716\",\r\n        }}\r\n      >\r\n        <Button onClick={handleTakePhoto} variant=\"inline-link\" fullWidth>\r\n          <span style={{ color: \"#EAD72F\" }}>\r\n            {isPhotoTaken ? \"RETAKE PHOTO\" : \"TAKE A PHOTO\"}\r\n          </span>\r\n        </Button>\r\n        <div style={{ display: \"flex\", margin: \"0 auto\", width: \"60%\" }}>\r\n          <Button\r\n            disabled={!isCaptured} \r\n            fullWidth\r\n            variant=\"primary\"\r\n            onClick={() =>\r\n              navigate(\"/app/home/runsheet/${runsheetId}/customer-details/${order.id}/captured-verified\")\r\n            }\r\n          >\r\n            Verified\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {visible && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            backgroundColor: \"rgba(0, 0, 0, 0.6)\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            zIndex: 1000,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              backgroundColor: \"#fff\",\r\n              padding: \"20px\",\r\n              borderRadius: \"8px\",\r\n              textAlign: \"center\",\r\n              width: \"40%\",\r\n              maxWidth: \"400px\",\r\n            }}\r\n          >\r\n            <Icon name=\"status-positive\" size=\"big\" variant=\"success\" />\r\n            <h3 style={{ color: \"#28a745\" }}>Photo Captured</h3>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n  \r\n};\r\n\r\nexport default VerifiedOrder;\r\n"],"names":["VerifiedOrder","navigate","useNavigate","visible","setVisible","useState","isCaptured","setIsCaptured","photo","setPhoto","isPhotoTaken","setIsPhotoTaken","videoRef","useRef","canvasRef","startCamera","async","stream","navigator","mediaDevices","getUserMedia","video","facingMode","current","srcObject","err","console","error","useEffect","tracks","getTracks","forEach","track","stop","_jsxs","style","display","position","top","left","right","bottom","justifyContent","alignItems","height","flexDirection","backgroundColor","children","width","_jsx","ref","autoPlay","playsInline","src","alt","className","gap","background","Button","onClick","handleTakePhoto","context","getContext","videoWidth","videoHeight","drawImage","photoUrl","toDataURL","setTimeout","variant","fullWidth","color","margin","disabled","zIndex","padding","borderRadius","textAlign","maxWidth","Icon","name","size"],"sourceRoot":""}