"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[219],{2219:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var r=i(5336),n=i(5043),s=i(3216),l=i(7949),o=i(579);const c=()=>{const{runsheetId:e,orderId:t}=(0,s.g)(),i=(0,s.Zp)(),[c,a]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),x=(0,n.useRef)(null),v=(0,n.useRef)(null),y=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});x.current&&(x.current.srcObject=e)}catch(e){console.error("Error accessing the camera: ",e)}};(0,n.useEffect)((()=>(y(),()=>{if(x.current){const e=x.current.srcObject,t=null===e||void 0===e?void 0:e.getTracks();null===t||void 0===t||t.forEach((e=>e.stop()))}})),[]);return(0,o.jsxs)("div",{style:{display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0,justifyContent:"center",alignItems:"center",height:"100%",flexDirection:"column",backgroundColor:"#000716"},children:[!f&&(0,o.jsxs)("div",{style:{height:"88vh",width:"100%",backgroundColor:"#000716"},children:[(0,o.jsx)("video",{ref:x,autoPlay:!0,playsInline:!0,style:{width:"100%",height:"100%",position:"absolute",left:0,top:0}}),(0,o.jsx)("canvas",{ref:v,style:{display:"none"}})]}),f&&(0,o.jsx)("div",{style:{width:"100%",height:"88vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#000716"},children:(0,o.jsx)("img",{src:h,alt:"Captured",style:{width:"80%",height:"auto"}})}),(0,o.jsxs)("div",{className:"flex jcc aic",style:{width:"100%",gap:20,flexDirection:"column",height:"24vh",position:"absolute",bottom:0,background:"#000716"},children:[(0,o.jsx)(r.A,{onClick:()=>{if(f)g(null),p(!1),u(!1),y();else{if(x.current&&v.current){const e=v.current.getContext("2d");v.current.width=x.current.videoWidth,v.current.height=x.current.videoHeight,e.drawImage(x.current,0,0,v.current.width,v.current.height);const t=v.current.toDataURL("image/jpeg");g(t),u(!0),p(!0)}a(!0),setTimeout((()=>{a(!1)}),2e3)}},variant:"inline-link",fullWidth:!0,children:(0,o.jsx)("span",{style:{color:"#EAD72F"},children:f?"RETAKE PHOTO":"TAKE A PHOTO"})}),(0,o.jsx)("div",{style:{display:"flex",margin:"0 auto",width:"70%"},children:(0,o.jsx)(r.A,{disabled:!d,fullWidth:!0,variant:"primary",onClick:()=>i("/app/home/runsheet/".concat(e,"/customer-details/order/").concat(t,"/captured-verify")),children:"Verified"})})]}),c&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,o.jsxs)("div",{style:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",textAlign:"center",width:"40%",maxWidth:"400px"},children:[(0,o.jsx)(l.A,{name:"status-positive",size:"big",variant:"success"}),(0,o.jsx)("h3",{style:{color:"#28a745"},children:"Photo Captured"})]})})]})}}}]);
//# sourceMappingURL=219.c7985872.chunk.js.map